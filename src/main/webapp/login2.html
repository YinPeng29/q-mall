<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">

		<link rel="stylesheet" href="/statics/bootstrap/css/bootstrap.min.css">
		<!--<link rel="stylesheet" href="/statics/layui2.2/css/layui.css" media="all" />-->
		<link rel="stylesheet" href="/statics/css/login2.css" />
		<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
		<script src="/statics/plugins/jquery-3.2.1.min.js"></script>
		<script src="/statics/bootstrap/js/bootstrap.min.js"></script>

		<script>
            var form,layer,upload;
            function initlayui(){
                layui.use(['layer','form','upload'], function(){
                    layer = layui.layer;
                    upload = layui.upload;
                    form = layui.form;
                });
            }
            $(window).resize(function(){
                if($(".video-player").width() > $(window).width()){
                    $(".video-player").css({"height":$(window).height(),"width":"auto","left":-($(".video-player").width()-$(window).width())/2});
                }else{
                    $(".video-player").css({"width":$(window).width(),"height":"auto","left":-($(".video-player").width()-$(window).width())/2});
                }
            }).resize();
			$(document).ready(function() {
			    initlayui();
                $("#regist_container").hide();
                $("#_close").show();
                $("#_start").animate({
                    left: '350px',
                    height: '520px',
                    width: '400px'
                }, 500, function() {
                    $("#login_container").show(500);
                    $("#_close").animate({
                        height: '40px',
                        width: '40px'
                    }, 500);
                });
				//打开会员登录 
//				$("#Login_start_").click(function() {
//					$("#regist_container").hide();
//					$("#_close").show();
//					$("#_start").animate({
//						left: '350px',
//						height: '520px',
//						width: '400px'
//					}, 500, function() {
//						$("#login_container").show(500);
//						$("#_close").animate({
//							height: '40px',
//							width: '40px'
//						}, 500);
//					});
//				});
				//打开会员注册
//				$("#Regist_start_").click(function() {
//					$("#login_container").hide();
//					$("#_close").show();
//					$("#_start").animate({
//						left: '350px',
//						height: '520px',
//						width: '400px'
//					}, 500, function() {
//						$("#regist_container").show(500);
//						$("#_close").animate({
//							height: '40px',
//							width: '40px'
//						}, 500);
//					});
//				});
				//关闭
				$("#_close").click(function() {
					
//					$("#_close").animate({
//						height: '0px',
//						width: '0px'
//					}, 500, function() {
//						$("#_close").hide(500);
//						$("#login_container").hide(500);
//						$("#regist_container").hide(500);
//						$("#_start").animate({
//							left: '0px',
//							height: '0px',
//							width: '0px'
//						}, 500);
//					});
					window.location.href="/main.html"
				});
				//去 注册
				$("#toRegist").click(function(){
					$("#login_container").hide(500);
					$("#regist_container").show(500);
				});
				//去 登录
				$("#toLogin").click(function(){
					$("#regist_container").hide(500);
					$("#login_container").show(500);
				});
			});
		</script>
	</head>

	<body style="background-color: #000000;">
		<video class="video-player" preload="auto" autoplay="autoplay" loop="loop" data-height="1080" data-width="1920" height="1080" width="1920">
			<source src="statics/page/login/login.mp4" type="video/mp4">
			<!-- 此视频文件为支付宝所有，在此仅供样式参考，如用到商业用途，请自行更换为其他视频或图片，否则造成的任何问题使用者本人承担，谢谢 -->
		</video>

		<!--<a id="Login_start_" class="btn btn-danger" style="width:100px;height:40px;border-radius: 0;">登陆</a>-->
		<!--<a id="Regist_start_" class="btn btn-success" style="width:100px;height:40px;border-radius: 0;">注册</a>-->

		<!-- 会员登录  -->
		<!--<div id='Login_start' style="position: absolute;" >-->
		<div id='_start'>
			<div id='_close' style="display: none;">
				<span class="glyphicon glyphicon-remove"></span>
			</div>
			<br /> 
			<!--登录框-->
			<div id="login_container">
				<div id="lab1">
					<span id="lab_login">会员登录</span>
					<span id="lab_toRegist">
						&emsp;还没有账号&nbsp;
						<span id='toRegist' style="color: #32B072;cursor: pointer;">立即注册</span>
					</span>
				</div>
				<div style="width:330px;">
					<span id="lab_type1">手机/邮箱/账号登录</span>
				</div>
				<div id="form_container1">
					<br />
					<form id="user_login" action="" method="post">
						<input type="text" name="userName" id="login_number" class="form-control" style="height: 46px" placeholder="手机号/用户名/邮箱" />
						<input type="password" name="passWord" id="login_password" class="form-control" style="height: 46px" placeholder="密码" />
					</form>
					<input type="button" value="登录" class="btn btn-success" id="login_btn" />
					<span id="rememberOrfindPwd">
						<span>
							<input id="remember" type="checkbox"  style="margin-bottom: -1.5px;"/>
						</span>
					<span style="color:#000000">
							记住密码&emsp;&emsp;&emsp;&emsp;
						</span>
					<span style="color:#000000">
							忘记密码
						</span>
					</span>
				</div>

				<div style="display:block;width:330px;height：40px;">
					<span id="lab_type2">第三方账号登录</span>
				</div>
				<div style="width:330px;height:100px;border-bottom: 1px solid #FFFFFF;">
					<br />
					<button id="login_QQ" type="button" class="btn btn-info">
						<img src="statics/images/qq32.png" style="width:20px;margin-top:-4px;" />&emsp;QQ登录
					</button>
					<button id="login_WB" type="button" class="btn btn-danger">
						<img src="/statics/images/sina32.png" style="width:20px;margin-top:-4px;" />&emsp;微博登录
					</button>
				</div>
			</div>
			<!-- 会员注册 -->
			<div id='regist_container' style="display: none;">
				<div id="lab2">
					<span id="lab_register">会员注册</span>
					<span id="lab_toLogin">
						&emsp;已有账号&nbsp;
						<span id='toLogin' style="color: #32B072;cursor: pointer;">立即登录</span>
					</span>
				</div>
				<form id="user_register" action="" method="post">
					<div id="form_container2" style="padding-top: 25px;">

						<input type="text" class="form-control" value="admin"  placeholder="用户名" id="regist_account" name="username"/>
						<input type="password" class="form-control" placeholder="密码" id="regist_password1" name="password" />
						<input type="password" class="form-control" placeholder="确认密码" id="regist_password2" name="confirm_password" />
						<input type="text" class="form-control" placeholder="邮箱" id="regist_email" name="email" />
						 <!--<input type="text" class="form-control" placeholder="验证码" id="regist_vcode" name="vcode" />-->
						<!--<button id="getVCode" type="button" class="btn btn-success" >获取验证码</button>-->
						<!--<input id="getVCode" type="button" class="btn btn-success" value="点击发送验证码" onclick="sendCode(this)" />-->

					</div>
				</form>
				<input type="button" value="注册" class="btn btn-success" id="regist_btn" />
			</div>
		</div>

	</body>
	<script type="text/javascript" src="/statics/layui2.2/layui.js"></script>
	<script type="text/javascript">
		var clock = '';
		var nums = 30;
		var btn;
		function sendCode(thisBtn) {
			btn = thisBtn;
			btn.disabled = true; //将按钮置为不可点击
			btn.value = '重新获取（'+nums+'）';
			clock = setInterval(doLoop, 1000); //一秒执行一次
		}

		function doLoop() {
			nums--;
			if (nums > 0) {
				btn.value = '重新获取（'+nums+'）';
			} else {
				clearInterval(clock); //清除js定时器
				btn.disabled = false;
				btn.value = '点击发送验证码';
				nums = 10; //重置时间
			}
		}
		
		$(document).ready(function(){
			$("#login_QQ").click(function(){
				alert("暂停使用！");
			});
			$("#login_WB").click(function(){
				alert("暂停使用！");
			});
		});

		$("#login_btn").click(function(){
            $.ajax({
                type: "POST",
                url: "/user/login",
                data: $('#user_login').serialize(),
                dataType: "json",
                success: function(resp){
                    if(resp.respcode=="0000"){
                        if(resp.type == "0"){
							window.location.href="/main.html";
						}else{
                            window.location.href="/index.html";
						}
					}else{
                        layer.alert("用户或者密码错误!");
					}
                }
            });
		});

        var filter=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;   //email 邮箱验证
		$("#regist_btn").click(function(){
			console.log("user: "+$("#regist_account").val()+" password :　"+$("#regist_password1").val()+" email: "+$("#email").val());
			var email = $("#regist_email").val();
            if(!filter.test(email)){
                layer.alert("邮箱格式错误");
                return false;
            }
            var pass = $("#regist_password1").val();
            var rpass = $("#regist_password2").val();
            if(pass == rpass){
                $("#user_register").attr("action","/user/save");
                $("#user_register").submit();
            }else{
                alert("两次输入的密码不同");
            }
		});
	</script>

</html>